<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Youtube Pl1ayer</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #111;
    color: #fff;
  }

  /* sidebar */
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 220px;
    height: 100%;
    background: #1a1a1a;
    padding: 20px 0;
    box-sizing: border-box;
  }
  .sidebar a {
    display: block;
    padding: 10px 20px;
    color: #fff;
    text-decoration: none;
    margin-bottom: 5px;
    cursor: pointer;
  }
  .sidebar a:hover {
    background: #333;
  }

  /* top bar (categories + search) */
  .top-bar {
    margin-left: 240px;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    gap: 20px;
  }
  .categories {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    flex: 1;
  }
  .categories button {
    padding: 6px 12px;
    border: none;
    border-radius: 16px;
    background: #333;
    color: #fff;
    cursor: pointer;
  }
  .categories button:hover {
    background: #555;
  }
  .search-bar {
    display: flex;
    gap: 5px;
  }
  .search-bar input {
    padding: 6px 10px;
    border: none;
    border-radius: 16px;
    outline: none;
    width: 220px;
  }
  .search-bar button {
    padding: 6px 12px;
    border: none;
    border-radius: 16px;
    background: #cc0000;
    color: #fff;
    cursor: pointer;
  }
  .search-bar button:hover {
    background: #ff0000;
  }

  /* video grids */
  .video-section {
    margin-left: 240px;
    padding: 20px;
  }
  .video-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 10px;
  }
  .video-item {
    cursor: pointer;
  }
  .video-item img {
    width: 100%;
    border-radius: 6px;
  }
  .video-item p {
    margin: 5px 0 0 0;
    font-size: 14px;
  }

  /* shorts horizontal row */
  .shorts-row {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding-bottom: 10px;
  }
  .short-item {
    min-width: 160px;
    cursor: pointer;
  }
  .short-item img {
    width: 100%;
    border-radius: 6px;
  }
  .short-item p {
    margin: 5px 0 0 0;
    font-size: 12px;
  }

  /* fullscreen overlay player */
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: none;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    padding: 20px;
    box-sizing: border-box;
    z-index: 1000;
  }
  .player iframe {
    width: 100%;
    height: 70vh;
    border: none;
      background: #000; /* Dark background behind iframe */
  padding: 10px;
  border-radius: 6px;
  }
  .video-info {
    overflow-y: auto;
    background: #1a1a1a;
    padding: 15px;
    border-radius: 6px;
  }
  .video-info h3 {
    margin: 0 0 10px 0;
  }
  .video-info p {
    margin: 5px 0;
    font-size: 14px;
    color: #bbb;
  }
  .close-btn {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 28px;
    color: #fff;
    cursor: pointer;
  }
</style>
</head>
<body>

<div class="sidebar">
  <a onclick="loadFYP()">Home</a>
  <a href="#">Shorts</a>
  <a href="#">Subscriptions</a>
  <hr style="border-color:#333;">
  <a onclick="loadHistory()">History</a>
  <a href="#">Playlists</a>
  <a href="#">Your Videos</a>
  <a href="#">Watch Later</a>
  <a href="#">Liked Videos</a>
</div>

<div class="top-bar">
  <div class="categories" id="categories">
    <button onclick="loadFYP()">All</button>
    <button>Music</button>
    <button>Gaming</button>
    <button>Live</button>
    <button>Sports</button>
    <button>News</button>
    <button>Movies</button>
    <button>Education</button>
  </div>
  <div class="search-bar">
    <input type="text" id="search-input" placeholder="Search...">
    <button onclick="searchVideos()">Search</button>
  </div>
</div>

<div class="video-section">
  <h2 id="section-title">For You</h2>
  <div class="video-grid" id="video-list"></div>

  <h2>Shorts</h2>
  <div class="shorts-row" id="shorts-list"></div>
</div>

<!-- Fullscreen overlay player -->
<div class="overlay" id="overlay">
  <span class="close-btn" onclick="closeOverlay()">Ã—</span>
  <div class="player" id="player"></div>
  <div class="video-info" id="video-info"></div>
</div>

<script>
const API_KEY = 'AIzaSyCdNJr3LrTw1ObLmRp0nk5Rn2wr8AdnwI8'; // replace with your API key
let nextPageToken = null;
let currentMode = "fyp"; // "fyp", "search", "history"
let currentQuery = "";

// fetch popular videos for FYP
async function fetchFYP(loadMore = false) {
  let url = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&regionCode=US&maxResults=12&key=${API_KEY}`;
  if (loadMore && nextPageToken) url += `&pageToken=${nextPageToken}`;
  const res = await fetch(url);
  const data = await res.json();
  nextPageToken = data.nextPageToken || null;
  displayVideos(data.items, 'video-list', loadMore);
  currentMode = "fyp";
  document.getElementById("section-title").innerText = "For You";
}

// fetch shorts (one-time load)
async function fetchShorts() {
  const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoDuration=short&maxResults=10&q=fun&key=${API_KEY}`);
  const data = await res.json();
  displayVideos(data.items, 'shorts-list');
}

// search videos
async function searchVideos(loadMore = false) {
  const query = loadMore ? currentQuery : document.getElementById('search-input').value;
  if (!query) return;

  if (!loadMore) {
    document.getElementById('section-title').innerText = `Results for "${query}"`;
    document.getElementById('video-list').innerHTML = "";
  }

  let url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${encodeURIComponent(query)}&key=${API_KEY}`;
  if (loadMore && nextPageToken) url += `&pageToken=${nextPageToken}`;
  const res = await fetch(url);
  const data = await res.json();
  nextPageToken = data.nextPageToken || null;
  currentMode = "search";
  currentQuery = query;
  displayVideos(data.items, 'video-list', loadMore);
}

// show videos in a grid
function displayVideos(videos, containerId, append = false) {
  const container = document.getElementById(containerId);
  if (!append) container.innerHTML = "";
  videos.forEach(video => {
    const div = document.createElement('div');
    div.className = containerId === 'shorts-list' ? 'short-item' : 'video-item';
    const videoId = video.id.videoId || video.id;
    div.innerHTML = `
      <img src="${video.snippet.thumbnails.medium.url}" alt="${video.snippet.title}">
      <p>${video.snippet.title}</p>
    `;
    div.onclick = () => playVideo(videoId, video.snippet, video.statistics);
    container.appendChild(div);
  });
}

// play video in overlay
function playVideo(videoId, snippet, stats) {
  const overlay = document.getElementById('overlay');
  const playerDiv = document.getElementById('player');
  const infoDiv = document.getElementById('video-info');

  playerDiv.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>`;
  infoDiv.innerHTML = `
    <h3>${snippet.title}</h3>
    <p>Channel: ${snippet.channelTitle}</p>
    <p>${stats ? stats.viewCount : 'N/A'} views</p>
    <p>${snippet.description}</p>
  `;

  overlay.style.display = "grid";

  // save to history
  saveToHistory({
    id: videoId,
    title: snippet.title,
    channel: snippet.channelTitle,
    thumbnail: snippet.thumbnails.medium.url
  });
}

// close overlay
function closeOverlay() {
  document.getElementById('overlay').style.display = "none";
  document.getElementById('player').innerHTML = "";
}

// save video to history (localStorage)
function saveToHistory(video) {
  let history = JSON.parse(localStorage.getItem("history")) || [];
  history = history.filter(v => v.id !== video.id); // remove duplicates
  history.unshift(video); // add to top
  if (history.length > 50) history.pop(); // limit history
  localStorage.setItem("history", JSON.stringify(history));
}

// load history page
function loadHistory() {
  currentMode = "history";
  document.getElementById("section-title").innerText = "History";
  document.getElementById("video-list").innerHTML = "";
  const history = JSON.parse(localStorage.getItem("history")) || [];
  if (history.length === 0) {
    document.getElementById("video-list").innerHTML = "<p>No history yet.</p>";
    return;
  }
  history.forEach(video => {
    const div = document.createElement('div');
    div.className = "video-item";
    div.innerHTML = `
      <img src="${video.thumbnail}" alt="${video.title}">
      <p>${video.title}</p>
    `;
    div.onclick = () => playVideo(video.id, { 
      title: video.title, 
      channelTitle: video.channel, 
      description: "" , 
      thumbnails: { medium: { url: video.thumbnail } } 
    }, null);
    document.getElementById("video-list").appendChild(div);
  });
}

// infinite scroll
window.addEventListener("scroll", () => {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {
    if (currentMode === "fyp") {
      fetchFYP(true);
    } else if (currentMode === "search") {
      searchVideos(true);
    }
  }
});

// initial load
function loadFYP() {
  document.getElementById('video-list').innerHTML = "";
  fetchFYP();
}
loadFYP();
fetchShorts();
</script>

</body>
</html>



