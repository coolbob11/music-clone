<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YouTube Music-style Player with Search</title>
  <style>
    body {margin:0;font-family:sans-serif;background:#111;color:#fff}
    .app{display:flex;gap:16px;padding:16px;box-sizing:border-box;min-height:100vh}
    .sidebar{width:340px;display:flex;flex-direction:column;gap:12px}
    .brand{font-weight:700;font-size:22px}
    .playlist-card{background:#1b1b1b;border-radius:12px;padding:12px;flex:1;overflow:auto}
    .track{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.05)}
    .track.active{background:rgba(255,122,0,0.15)}
    .thumb{width:60px;height:60px;border-radius:6px;object-fit:cover}
    .meta{flex:1;min-width:0}
    .title{font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .artist{font-size:12px;color:#aaa}
    .player-wrapper{flex:1;display:flex;flex-direction:column;gap:14px}
    .now-playing{background:#1b1b1b;border-radius:12px;padding:16px;display:flex;gap:16px;align-items:center}
    .art{width:200px;height:200px;border-radius:10px;overflow:hidden}
    .art img{width:100%;height:100%;object-fit:cover}
    .info{flex:1}
    .song-title{font-size:20px;font-weight:700}
    .song-artist{color:#aaa;margin-top:6px}
    .controls{margin-top:14px;display:flex;gap:8px}
    .btn{background:#ff7a00;border:none;border-radius:8px;padding:8px 14px;cursor:pointer;color:#fff}
    .search-box{display:flex;gap:8px}
    .search-box input{flex:1;padding:8px;border-radius:6px;border:none}
    .search-box button{padding:8px 14px;border-radius:6px;border:none;background:#ff7a00;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">ðŸŽµ YouTube Music Clone</div>
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search songs...">
        <button id="searchBtn">Search</button>
      </div>
      <div class="playlist-card" id="playlist"></div>
    </aside>

    <main class="player-wrapper">
      <div class="now-playing">
        <div class="art"><img id="art-img" src=""></div>
        <div class="info">
          <div class="song-title" id="now-title">Select a track</div>
          <div class="song-artist" id="now-artist">YouTube</div>
          <div class="controls">
            <button class="btn" id="prev">Prev</button>
            <button class="btn" id="play">Play</button>
            <button class="btn" id="next">Next</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div id="yt-player" style="display:none"></div>

  <script>
    const API_KEY = "AIzaSyCdNJr3LrTw1ObLmRp0nk5Rn2wr8AdnwI8"; // ðŸ”‘ Your YouTube Data API v3 key

    let tracks = [
      { id: "kXYiU_JCYtU", title: "Numb", artist: "Linkin Park" },
      { id: "3jWRrafhO7M", title: "Bohemian Rhapsody", artist: "Queen" }
    ];
    let currentIndex = 0;
    let player, isPlaying=false;

    const playlistEl = document.getElementById("playlist");
    const artImg = document.getElementById("art-img");
    const nowTitle = document.getElementById("now-title");
    const nowArtist = document.getElementById("now-artist");
    const playBtn = document.getElementById("play");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");

    function renderPlaylist(){
      playlistEl.innerHTML="";
      tracks.forEach((t,i)=>{
        const el=document.createElement("div");
        el.className="track"+(i===currentIndex?" active":"");
        el.innerHTML=`
          <img class="thumb" src="https://img.youtube.com/vi/${t.id}/hqdefault.jpg">
          <div class="meta">
            <div class="title">${t.title}</div>
            <div class="artist">${t.artist}</div>
          </div>
        `;
        el.onclick=()=>playIndex(i);
        playlistEl.appendChild(el);
      });
    }

    function updateNowPlaying(){
      const t=tracks[currentIndex];
      artImg.src=`https://img.youtube.com/vi/${t.id}/hqdefault.jpg`;
      nowTitle.textContent=t.title;
      nowArtist.textContent=t.artist;
    }

    function playIndex(i){
      currentIndex=i;
      renderPlaylist();
      updateNowPlaying();
      player.loadVideoById(tracks[currentIndex].id);
    }

    function togglePlay(){
      if(!player)return;
      if(isPlaying){player.pauseVideo();}else{player.playVideo();}
    }
    function prevTrack(){
      currentIndex=(currentIndex-1+tracks.length)%tracks.length;
      playIndex(currentIndex);
    }
    function nextTrack(){
      currentIndex=(currentIndex+1)%tracks.length;
      playIndex(currentIndex);
    }

    async function searchYouTube(q){
      const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoCategoryId=10&maxResults=10&q=${encodeURIComponent(q)}&key=${API_KEY}`;
      const res = await fetch(url);
      const data = await res.json();
      tracks = data.items.map(item=>({
        id: item.id.videoId,
        title: item.snippet.title,
        artist: item.snippet.channelTitle
      }));
      currentIndex=0;
      renderPlaylist();
      updateNowPlaying();
    }

    document.getElementById("searchBtn").onclick=()=>{
      const q=document.getElementById("searchInput").value;
      if(q) searchYouTube(q);
    };

    function loadYouTubeAPI(){
      return new Promise(res=>{
        if(window.YT){res();}
        else{
          const tag=document.createElement("script");
          tag.src="https://www.youtube.com/iframe_api";
          document.body.appendChild(tag);
          window.onYouTubeIframeAPIReady=()=>res();
        }
      });
    }

    async function initPlayer(){
      await loadYouTubeAPI();
      player=new YT.Player("yt-player",{
        videoId:tracks[currentIndex].id,
        events:{
          onStateChange:e=>{
            if(e.data===1){isPlaying=true;playBtn.textContent="Pause";}
            else if(e.data===2){isPlaying=false;playBtn.textContent="Play";}
            else if(e.data===0){nextTrack();}
          }
        }
      });
    }

    playBtn.onclick=togglePlay;
    prevBtn.onclick=prevTrack;
    nextBtn.onclick=nextTrack;

    renderPlaylist();
    updateNowPlaying();
    initPlayer();
  </script>
</body>
</html>

