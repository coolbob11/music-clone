<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Random YouTube Videos</title>
<style>
  body {
    margin: 0; font-family: sans-serif; background: #111; color: white;
  }
  #video-list {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap: 10px;
    padding: 20px;
  }
  .video-item {
    cursor: pointer;
  }
  .video-item img {
    width: 100%;
    border-radius: 6px;
  }
  .video-item p {
    margin: 5px 0 0 0;
    font-size: 14px;
  }
  #loading {
    text-align: center;
    padding: 20px;
    color: #aaa;
  }
  #player-overlay {
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.9);
    display:none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }
  #player-frame {
    width: 80vw; height: 45vw; max-height: 80vh;
  }
  #close-btn {
    position: fixed;
    top: 20px; right: 30px;
    font-size: 30px;
    color: white;
    cursor: pointer;
    z-index: 10000;
  }
</style>
</head>
<body>

<div id="video-list"></div>
<div id="loading">Loading videos...</div>

<div id="player-overlay">
  <div id="close-btn">&#x2715;</div>
  <iframe id="player-frame" src="" frameborder="0" allowfullscreen></iframe>
</div>

<script>
const API_KEY = 'AIzaSyCdNJr3LrTw1ObLmRp0nk5Rn2wr8AdnwI8 dc';  // Replace with your API key
const videoList = document.getElementById('video-list');
const loading = document.getElementById('loading');
const overlay = document.getElementById('player-overlay');
const playerFrame = document.getElementById('player-frame');
const closeBtn = document.getElementById('close-btn');

let nextPageToken = null;
let loadingMore = false;
let shownVideoIds = new Set();

// Generate random single letter for search query
function getRandomLetter() {
  const letters = 'abcdefghijklmnopqrstuvwxyz';
  return letters.charAt(Math.floor(Math.random() * letters.length));
}

async function fetchRandomVideos(loadMore = false) {
  if (loadingMore) return;
  loadingMore = true;
  loading.style.display = 'block';

  let query = getRandomLetter();

  let url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${query}&key=${API_KEY}`;
  if (loadMore && nextPageToken) {
    url += `&pageToken=${nextPageToken}`;
  } else {
    nextPageToken = null;
    shownVideoIds.clear();
    videoList.innerHTML = '';
  }

  try {
    const response = await fetch(url);
    const data = await response.json();

    nextPageToken = data.nextPageToken || null;

    // Add videos to page, skip duplicates
    data.items.forEach(item => {
      const vid = item.id.videoId;
      if (shownVideoIds.has(vid)) return;
      shownVideoIds.add(vid);

      const div = document.createElement('div');
      div.className = 'video-item';
      div.innerHTML = `
        <img src="${item.snippet.thumbnails.medium.url}" alt="${item.snippet.title}" />
        <p>${item.snippet.title}</p>
      `;
      div.onclick = () => openPlayer(vid);
      videoList.appendChild(div);
    });
  } catch (e) {
    console.error('Error loading videos:', e);
  }

  loadingMore = false;
  loading.style.display = 'none';
}

function openPlayer(videoId) {
  playerFrame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
  overlay.style.display = 'flex';
}

function closePlayer() {
  overlay.style.display = 'none';
  playerFrame.src = '';
}

closeBtn.addEventListener('click', closePlayer);

// Load initial videos
fetchRandomVideos();

// Load more on scroll near bottom
window.addEventListener('scroll', () => {
  if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 150) {
    fetchRandomVideos(true);
  }
});
</script>

</body>
</html>
